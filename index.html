<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">



    <script>
      window.onload = function(){
        
      // creating table for the auto generated table using JS
       
       mailTable = document.getElementById("mailTable");

       alert("Welcome to Justins Zombie Mail, beware of the zombies!!");
      	// elements in the table 

       // tr = document.createElement("tr");
       // td_sender = document.createElement("td");
       // td_date = document.createElement("td");
       // td_subject = document.createElement("td");

       
       // iterating through the array to display data with functions for data display

		function displayMailData(){
			for(i=0; i<window.geemails.length; i++){
       		
	       	tr = document.createElement("tr");
	        td_sender = document.createElement("td");
	        td_date = document.createElement("td");
	        td_subject = document.createElement("td");
	        td_body = document.createElement("td");	
       		
       		// making text for each data type sender,date,body,subject
       		td_sender.appendChild(document.createTextNode(window.geemails[i].sender));

       		td_subject.appendChild(document.createTextNode(window.geemails[i].subject));

       		td_date.appendChild(document.createTextNode(window.geemails[i].date));
       			
       			td_body.appendChild(document.createTextNode(window.geemails[i].body));

       			td_body.setAttribute("class","mailcontent"); 

       			//adding data for each type to the table row

       		tr.appendChild(td_sender);
       		tr.appendChild(td_subject);
       		tr.appendChild(td_date);
       		tr.appendChild(td_body);
       		tr.addEventListener("click",displaymailcontents);
   
       			mailTable.appendChild(tr);
	}	
}
		displayMailData();

		
		td_mailcount = document.getElementById("mailcount");

      	// data in mail table 

      	td_mailcount.textContent ="Total mails: "  + window.geemails.length;



      	// on click funtion
function displaymailcontents(event){
	console.log(this.children[3].innerText);
	mailSender = document.getElementById("mailSender");
	mailDate = document.getElementById("mailDate");
	mailSubject = document.getElementById("mailSubject");
	mailBody = document.getElementById("mailBody");
	mailSender.textContent = this.children[0].innerText;
	mailDate.textContent = this.children[2].innerText;
	mailSubject.textContent = this.children[1].innerText;
	mailBody.textContent = this.children[3].innerText;
	modal.style.display = "block";
}
	
	// The following code snippets were taken from W3schools here: https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal2
	// ====================


// Get the modal
var modal = document.getElementById('myModal');

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
       
      };

    </script>
	<script>

	
</script>

	</head>
	
	<body>
		<nav class="zombie">&nbsp;Justins Zombie Mail &nbsp;&nbsp;
		<span id="mailcount"></span></nav>

		
</table>
		<div class="container" id="main">

			<table id="mailTable" width="100%" cellpadding="0" cellspacing="0" border="0">
		</table>

<!-- The Modal from w3 schools -->
<div id="myModal" class="modal">

  <!-- Modal content from w3 schools-->
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
      <h2 id="mailSubject"></h2>
    </div>
    <div class="modal-body">
      <div id="mailSender"></div><div id="mailDate"
></div>
<div id="mailBody"></div>
    </div>
  </div>
</div>
			
 		</div>
 		
		 <div class="bottom">
			<footer>Justins Zombie Mail</footer>
		 </div>
		

	</body>
</html>


		